---
title: Entities
description: Learn about the core entity types in Unbook and how to work with them.
navigation:
  icon: i-lucide-boxes
github: https://github.com/shorwood/unbook/tree/main/packages/core/src/entities
---

## Understand entities

Unbook represents all content as entities. These are high-level classes that wrap the raw data from adapters and provide convenient methods for inspection, navigation, and manipulation.

The core entity types are:

| Entity | Description |
| --- | --- |
| **Page** | A document containing blocks of content |
| **Database** | A container for one or more data sources |
| **DataSource** | A table with a schema and queryable rows |
| **Block** | A content element (paragraph, heading, list, etc.) |
| **User** | A person or bot account |
| **File** | An uploaded file or external link |

All entities share common patterns:
- **Properties** for accessing data (e.g., `id`, `title`, `createdAt`)
- **Resolution methods** for navigating relationships (e.g., `getParent()`, `getChildren()`)
- **CRUD methods** for modifications (e.g., `update()`, `delete()`)

## Work with Pages

A `Page` represents a document that can contain blocks of content and have properties.

### Access page properties

```ts [src/index.ts]
const page = await workspace.getPage('page-id')

// Basic properties
console.log(page.id) // 'page-id'
console.log(page.title) // 'My Page Title'
console.log(page.url) // 'https://notion.so/...'

// Timestamps
console.log(page.createdAt) // Date { ... }
console.log(page.lastEditedAt) // Date { ... }
```

### Navigate page relationships

```ts [src/index.ts]
// Get the parent (Page, Block, or DataSource)
const parent = await page.getParent()

// Get child blocks
for await (const block of page.getChildren()) {
  console.log(block.type, await block.render())
}

// Get user information
const creator = await page.getCreator()
const editor = await page.getLastEditor()
```

### Update and archive pages

```ts [src/index.ts]
// Update the page title
await page.update({ title: 'New Title' })

// Update icon and cover
await page.update({
  icon: 'üìù',
  cover: 'https://example.com/image.jpg',
})

// Archive the page
await page.archive()

// Restore from archive
await page.restore()
```

### Render page content

Convert page content to Markdown:

```ts [src/index.ts]
const markdown = await page.render()
console.log(markdown)
// # Heading
//
// This is a paragraph.
//
// - List item 1
// - List item 2
```

### Append content to a page

```ts [src/index.ts]
import { paragraph, heading2, bulletedList } from '@unbook/core/shorthands'

await page.append([
  heading2('New Section'),
  paragraph('This content was added programmatically.'),
  bulletedList(['Item 1', 'Item 2', 'Item 3']),
])
```

## Work with Databases

A `Database` is a container that holds one or more data sources (tables).

### Access database properties

```ts [src/index.ts]
const database = await workspace.getDatabase('database-id')

console.log(database.id) // 'database-id'
console.log(database.title) // 'My Database'
console.log(database.description) // 'Database description'
console.log(database.url) // 'https://notion.so/...'

// Status flags
console.log(database.isArchived) // false
console.log(database.isInTrash) // false
console.log(database.isInline) // true/false
```

### Navigate database relationships

```ts [src/index.ts]
// Get the parent page or block
const parent = await database.getParent()

// Get user information
const creator = await database.getCreator()
const editor = await database.getLastEditor()
```

### Access data sources

```ts [src/index.ts]
// Get the list of data source references
console.log(database.dataSources)
// [{ id: '...', name: 'Default view' }]

// Get the primary data source
const dataSource = await database.getPrimaryDataSource()

// Get a specific data source by ID
const specificDataSource = await database.getDataSource('data-source-id')
```

### Update databases

```ts [src/index.ts]
await database.update({
  title: 'Updated Database Name',
  description: 'New description',
})
```

## Work with DataSources

A `DataSource` represents the actual table of data with a schema and queryable rows.

### Access data source properties

```ts [src/index.ts]
const dataSource = await database.getPrimaryDataSource()

console.log(dataSource.id) // 'data-source-id'
console.log(dataSource.title) // 'Tasks'
console.log(dataSource.properties) // { Name: { type: 'title', ... }, ... }

console.log(dataSource.createdAt) // Date { ... }
console.log(dataSource.lastEditedAt) // Date { ... }
```

### Query data source rows

```ts [src/index.ts]
// Query all rows
for await (const page of dataSource.query()) {
  console.log(page.title)
}

// Query with filters and sorting
for await (const page of dataSource.query({
  filter: {
    property: 'Status',
    select: { equals: 'In Progress' },
  },
  sorts: [
    { property: 'Due Date', direction: 'ascending' },
  ],
})) {
  console.log(page.title)
}
```

### Use typed queries with schemas

Attach a schema for type-safe hydrated records:

```ts [src/index.ts]
import { title, select, date } from '@unbook/core/shorthands'

const schema = {
  name: title('Name'),
  status: select('Status', ['To Do', 'In Progress', 'Done']),
  dueDate: date('Due Date'),
}

const typedDataSource = dataSource.withSchema(schema)

for await (const record of typedDataSource.query()) {
  // record is typed based on schema
  console.log(record.name) // string
  console.log(record.status) // 'To Do' | 'In Progress' | 'Done'
  console.log(record.dueDate) // Date | null
}
```

### Infer schema from existing data source

```ts [src/index.ts]
const inferredSchema = dataSource.inferSchema()
console.log(inferredSchema)
// { name: { label: 'Name', type: 'title' }, ... }
```

### Ensure schema synchronization

```ts [src/index.ts]
const updated = await dataSource.ensureSchema(mySchema, 'merge')
```

## Work with Blocks

A `Block` represents a content element within a page.

### Access block properties

```ts [src/index.ts]
for await (const block of page.getChildren()) {
  console.log(block.id) // 'block-id'
  console.log(block.type) // 'paragraph', 'heading_1', 'bulleted_list_item', etc.
  console.log(block.createdAt) // Date { ... }
  console.log(block.lastEditedAt) // Date { ... }
}
```

### Navigate block relationships

```ts [src/index.ts]
// Get the parent (Page, Block, or DataSource)
const parent = await block.getParent()

// Get nested child blocks
for await (const child of block.getChildren()) {
  console.log(child.type)
}
```

### Render and update blocks

```ts [src/index.ts]
// Render block to Markdown
const markdown = await block.render()

// Update block content
await block.update({
  paragraph: {
    rich_text: [{ type: 'text', text: { content: 'Updated text' } }],
  },
})

// Delete the block
await block.delete()
```

### Append child blocks

```ts [src/index.ts]
import { paragraph } from '@unbook/core/shorthands'

const newBlocks = await block.append([
  paragraph('Nested content'),
])
```

## Work with Users

A `User` represents a person or bot account.

### Access user properties

```ts [src/index.ts]
const user = await workspace.getUser('user-id')

console.log(user.id) // 'user-id'
console.log(user.type) // 'person' or 'bot'
console.log(user.name) // 'John Doe'
console.log(user.avatarUrl) // 'https://...'

// Person-specific property
if (user.isPerson()) {
  console.log(user.email) // 'john@example.com'
}

// Check user type
console.log(user.isPerson()) // true
console.log(user.isBot()) // false
```

### Get bot owner

For bot users, you can retrieve the owner:

```ts [src/index.ts]
if (user.isBot()) {
  const owner = await user.getOwner()
  console.log(owner?.name)
}
```
