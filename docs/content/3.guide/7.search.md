---
title: Search
description: Learn how to search for pages and data sources across your workspace.
navigation:
  icon: i-lucide-search
---

The workspace search API lets you find pages and data sources by title or content. This is useful for discovering existing resources or implementing search functionality in your application.

## Search for pages and data sources

Use `workspace.search()` to search across all accessible content:

```ts [search-basic.ts]
import { createNotionAdapter } from '@unbook/notion'
import { Workspace } from '@unbook/core'

const adapter = createNotionAdapter({ auth: process.env.NOTION_TOKEN })
const workspace = new Workspace(adapter)

// Search for anything matching "project"
for await (const result of workspace.search('project')) {
  if (result instanceof Page) {
    console.log('Page:', result.title)
  } else if (result instanceof DataSource) {
    console.log('Data Source:', result.title)
  }
}
```

## Filter by object type

Narrow results to only pages or data sources:

```ts [search-filter.ts]
// Search only pages
for await (const page of workspace.search('meeting notes', { filter: 'page' })) {
  console.log('Page:', page.title, page.url)
}

// Search only data sources
for await (const dataSource of workspace.search('tasks', { filter: 'data_source' })) {
  console.log('Data Source:', dataSource.title)
}
```

When you specify a filter, TypeScript knows the exact return type:

```ts [search-typed.ts]
// Type is AsyncIterable<Page>
const pages = workspace.search('project', { filter: 'page' })

// Type is AsyncIterable<DataSource>
const dataSources = workspace.search('tasks', { filter: 'data_source' })
```

## Sort results

Order results by last edited time:

```ts [search-sort.ts]
// Most recently edited first
for await (const result of workspace.search('documentation', {
  sortBy: 'descending',
})) {
  console.log(result.title)
}

// Oldest first
for await (const result of workspace.search('archive', {
  sortBy: 'ascending',
})) {
  console.log(result.title)
}
```

## Find a specific page by title

Search and match by exact title:

```ts [find-page.ts]
async function findPageByTitle(title: string): Promise<Page | undefined> {
  for await (const page of workspace.search(title, { filter: 'page' })) {
    if (page.title === title) {
      return page
    }
  }
  return undefined
}

const projectPage = await findPageByTitle('Q1 Project Plan')
if (projectPage) {
  console.log('Found:', projectPage.url)
} else {
  console.log('Page not found')
}
```

::note
Search returns results that contain the query, not just exact matches. Always verify the title if you need an exact match.
::

## Find a data source by title

Search for a data source and attach a schema:

```ts [find-data-source.ts]
import type { Schema } from '@unbook/core'

const taskSchema = {
  name: { label: 'Name', type: 'title' },
  status: { label: 'Status', type: 'select' },
  dueDate: { label: 'Due Date', type: 'date' },
} satisfies Schema.Definition

async function findTasksDatabase(): Promise<DataSource<typeof taskSchema> | undefined> {
  for await (const dataSource of workspace.search('Tasks', { filter: 'data_source' })) {
    if (dataSource.title === 'Tasks') {
      return dataSource.withSchema(taskSchema)
    }
  }
  return undefined
}

const tasks = await findTasksDatabase()
if (tasks) {
  for await (const task of tasks.find()) {
    console.log(task.name, task.status)
  }
}
```

## Search patterns

### Find or create pattern

Search for an existing resource, create if not found:

```ts [find-or-create.ts]
async function getOrCreateProjectPage(projectName: string): Promise<Page> {
  // Try to find existing
  for await (const page of workspace.search(projectName, { filter: 'page' })) {
    if (page.title === projectName) {
      return page
    }
  }

  // Create new
  return workspace.createPage(projectName, {
    icon: 'ðŸ“',
  })
}

const project = await getOrCreateProjectPage('Q2 Roadmap')
```

### Search with pagination

Handle large result sets:

```ts [search-pagination.ts]
let count = 0
const maxResults = 50

for await (const result of workspace.search('report')) {
  console.log(result.title)
  count++

  if (count >= maxResults) {
    console.log('Reached limit, stopping...')
    break
  }
}
```

### Collect all results

Convert async iterable to array:

```ts [search-collect.ts]
async function collectSearchResults(query: string): Promise<(Page | DataSource)[]> {
  const results: (Page | DataSource)[] = []

  for await (const result of workspace.search(query)) {
    results.push(result)
  }

  return results
}

const allDocs = await collectSearchResults('documentation')
console.log('Found', allDocs.length, 'results')
```

## Search considerations

### Rate limiting

Search operations count toward API rate limits. For high-volume searches:

```ts [rate-limit.ts]
// Add delay between searches if needed
async function searchWithDelay(queries: string[]) {
  for (const query of queries) {
    for await (const result of workspace.search(query)) {
      console.log(result.title)
    }

    // Wait between queries
    await new Promise(resolve => setTimeout(resolve, 100))
  }
}
```

### Search scope

The search API only returns content the authenticated integration has access to. Make sure your integration has been added to the relevant pages and databases.

### Full-text vs title search

The search API performs full-text search across:
- Page titles
- Page content
- Database titles
- Data source titles

It does not search within database row content. To search row data, query the data source with filters instead:

```ts [search-rows.ts]
// To search within a data source, use query filters
for await (const task of dataSource.find({
  filter: {
    property: 'Name',
    title: { contains: 'urgent' },
  },
})) {
  console.log(task.name)
}
```
